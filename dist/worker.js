!function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),n=r(3);const o={jar:class{constructor(e){this.request=e,this.cookies=e?n.parse(e.headers.get("cookie")||""):{},this.futureCookies={}}get(e){return this.cookies[e]}set(e,t,r){this.futureCookies[e]={value:t,...r}}__remove(){}values(){var e=[];for(const[t,r]of Object.entries(this.futureCookies))e.push(n.serialize(t,r.value,r));return e}}};function i(e){var t="",r="0123456789abcdef";return new Uint8Array(e).forEach(e=>{t+=r[e>>4]+r[15&e]}),t}const a={uuidv4:()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),async hashPassword(e,t){var r=(t=t||{}).salt||crypto.getRandomValues(new Uint8Array(8)),s=t.iterations||45e3;"string"==typeof r&&(r=function(e){(e=e.replace(/^0x/,"")).length%2!=0&&console.log("WARNING: expecting an even number of characters in the hexString");var t=e.match(/[G-Z\s]/i);t&&console.log("WARNING: found non-hex characters",t);var r=e.match(/[\dA-F]{2}/gi).map((function(e){return parseInt(e,16)}));return new Uint8Array(r).buffer}(r));const n=new TextEncoder("utf-8").encode(e),o=await crypto.subtle.importKey("raw",n,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),a=await crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:s,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);return`$PBKDF2;h=${i(await crypto.subtle.exportKey("raw",a))};s=${i(r)};i=${s};`},async validatePassword(e,t){for(var r={salt:t.split(";s=")[1].split(";")[0],iterations:t.split(";i=")[1].split(";")[0]},s=await this.hashPassword(e,r),n=!0,o=0;o<s.length;o++)s.charAt(o)!=t.charAt(o)&&(n=!1);return n}},c={version:"0.2.5",config:{secretKey:"password",debugHeaders:!1},accessControl:{allowOrigin:"*",allowMethods:"GET, POST, PUT",allowHeaders:"Content-Type"},request:null,_corsHeaders(){var e=this.accessControl.allowOrigin;return this.request&&(e=new URL(this.request.url).origin),{"Access-Control-Allow-Origin":e,"Access-Control-Allow-Methods":this.accessControl.allowMethods,"Access-Control-Max-Age":"1728000"}},injectCors(e,t){this._corsHeaders()},_genericResponse(e,t,r){void 0===r&&(r={});var s=r.headers||{},n=r.status||200,o=r.statusText||"OK",i=r.autoCors;void 0===r.autoCors&&(i=!0);var a=r.cookies||null,c=r.stopwatch||null,u={"Content-Type":e,...s};i&&(u={...u,...this._corsHeaders()});var h=new Response(t,{status:n,statusText:o,headers:u});return a&&a.values().forEach(e=>{h.headers.append("Set-Cookie",e)}),c&&h.headers.set("Server-Timing",c.getHeader()),this.config.debugHeaders&&h.headers.set("x-cfw-eu-version",this.version),h},cors(e){return e&&(this.request=e),new Response(null,{headers:this._corsHeaders()})},json(e,t){var r=e;return"string"!=typeof r&&(r=JSON.stringify(e)),this._genericResponse("application/json",r,t)},html(e,t){return this._genericResponse("text/html",e,t)},text(e,t){return this._genericResponse("plain/text",e,t)},fromResponse(e,t){var r={...this.headersToObject(e.headers),...t.headers||{}};"headers"in t&&delete t.headers;var s=JSON.parse(JSON.stringify(r["content-type"]));return"content-type"in r&&delete r["content-type"],this._genericResponse(s,e.body,{headers:r,...t})},async static(e,t){var r=t.baseUrl;if(!r)throw"You need to specify a baseUrl for response.static to work.";let s=new URL(e.url);var n=await fetch(`${r}${s.pathname.replace(t.routePrefix||"<>","")}`,{cf:{cacheTtl:t.ttl||600}});return this.fromResponse(n,t)},websocket:async e=>new Response(null,{status:101,webSocket:e.client}),setHeader(e,t,r){var s=new Response(e.body,e),n=r;return"function"==typeof r.values?(n=r.values()).forEach(e=>{s.headers.append(t,e)}):s.headers.append(t,n),s},headersToObject:e=>Object.fromEntries(e.entries())};t.Stopwatch=class{constructor(){this.start=new Date,this.checkpoints=[{name:"Start",dur:0,desc:"Started recording"}],this.lastCheckpointTime=new Date}mark(e,t){console.log("Last checkpoint: ",this.lastCheckpointTime),console.log(new Date),console.log("Difference: ",new Date-this.lastCheckpointTime),this.checkpoints.push({name:e,time:new Date,dur:new Date-this.lastCheckpointTime,...t}),this.lastCheckpointTime=new Date}getTotalTime(){return new Date-this.start}join(e){var t=this.checkpoints+e.checkpoints;this.checkpoints=t.sort((e,t)=>t.time-e.time)}getHeader(){var e=[];return this.checkpoints.forEach(t=>{var r=[t.name];Object.keys(t).forEach(e=>{"name"!=e&&"time"!=e&&r.push(`${e}=${t[e]}`)}),e.push(r.join(";"))}),e.join(",")}},t.WebsocketResponse=class{constructor(){let e=new WebSocketPair;this.socket=e[1],this.client=e[0],this.socket.accept(),this.emitter=s.createNanoEvents(),this.session={history:[],startTime:new Date,lastMessageTime:null},this.socket.addEventListener("message",e=>{var t=e.data;try{"string"==typeof(t=JSON.stringify(t))&&(t=e.data)}catch(e){}this.session.lastMessageTime=new Date,this.emitter.emit("message",t)}),this.socket.addEventListener("close",()=>this.emitter.emit("close"))}on(e,t){return this.emitter.on(e,t)}send(e,t){var r=e;e.constructor!=Object&&e.constructor!=Array||(r=JSON.stringify(r)),this.socket.send(r)}},t.cookies=o,t.response=c,t.secrets=a},function(e,t,r){"use strict";r.r(t);var s=r(0);addEventListener("fetch",e=>"OPTIONS"==e.request.method?e.respondWith(s.response.cors()):e.respondWith(async function(e){try{const r=new URL(e.url).searchParams.get("domain");if(r){const e=new URL("https://hstspreload.org/api/v2/status?domain="+r);var t=await fetch(e,{cf:{cacheTtl:600,cacheEverything:!0}});return t=new Response(t.body,t),s.response.fromResponse(t,{headers:{"Cache-Control":"max-age=600"}})}return s.response.json({error:"Please specify a domain"})}catch(e){return s.response.json({message:e.message,stack:e.stack})}}(e.request)))},function(e,t,r){"use strict";r.r(t),r.d(t,"createNanoEvents",(function(){return s}));let s=()=>({events:{},emit(e,...t){(this.events[e]||[]).forEach(e=>e(...t))},on(e,t){return(this.events[e]=this.events[e]||[]).push(t),()=>this.events[e]=(this.events[e]||[]).filter(e=>e!==t)}})},function(e,t,r){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=e.split(o),c=n.decode||s,u=0;u<i.length;u++){var h=i[u],l=h.indexOf("=");if(!(l<0)){var p=h.substr(0,l).trim(),d=h.substr(++l,h.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==r[p]&&(r[p]=a(d,c))}}return r},t.serialize=function(e,t,r){var s=r||{},o=s.encode||n;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var a=o(t);if(a&&!i.test(a))throw new TypeError("argument val is invalid");var c=e+"="+a;if(null!=s.maxAge){var u=s.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(u)}if(s.domain){if(!i.test(s.domain))throw new TypeError("option domain is invalid");c+="; Domain="+s.domain}if(s.path){if(!i.test(s.path))throw new TypeError("option path is invalid");c+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+s.expires.toUTCString()}s.httpOnly&&(c+="; HttpOnly");s.secure&&(c+="; Secure");if(s.sameSite){switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var s=decodeURIComponent,n=encodeURIComponent,o=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(t){return e}}}]);